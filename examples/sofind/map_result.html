<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>精品推荐</title>
		<link rel="stylesheet" href="../../components/fox-core/dist/foxui.css">
		<link rel="stylesheet" href="css/style.css"/>

		<script src="js/fastclick.js"></script>
		<script src="../../components/fox-core/dist/foxui.js"></script>
		<link rel="import" href="../../components/fox-content/dist/fox-content.html"/>
		<link rel="import" href="../../components/fox-icon/dist/fox-icon.html"/>
		<link rel="import" href="../../components/fox-tabbar/dist/fox-tabbar.html"/>
		<link rel="import" href="../../components/fox-page/dist/fox-page.html"/>
		<link rel="import" href="../../components/fox-model/dist/fox-model.html"/>
		<link rel="import" href="../../components/fox-toolbar/dist/fox-toolbar.html"/>
		<link rel="import" href="../../components/fox-slider/src/fox-slider.html"/>
		<link rel="import" href="../../components/fox-ajax/dist/fox-ajax.html"/>
		<link rel="import" href="../../components/fox-page-content/dist/fox-page-content.html"/>
		<link rel="import" href="../../components/fox-template/src/fox-template.html"/>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=hmPxdBHxPZvZU2x3RN9SSKGt"></script>
		<script src="js/app.js"></script>
	</head>
	<body style="visibility: hidden;">
		<fox-page transition="fade">
			<fox-page-content style="position:absolute;left:0;right:0;top:0;bottom:0">
				<div id="map_container1" style="height:100%"></div>
				<div class="search-box2" style="position: absolute;top: 0;width:100%;">
					<fox-icon icon="icon-left-nav" onclick="history.back();"></fox-icon>
					<div class="main">
						<fox-icon icon="icon-search" ></fox-icon>
						<input type="text" value="百度大厦" class="text"/>
					</div>
					<fox-icon icon="icon-list" style="position:relative;">
						<a class="match_parent" transition="hslide" href="list.html"></a>
					</fox-icon>
				</div>
				<div class="map-popup">
					<fox-template id="tmpl-detail" style="visibility: visible;">
						<div rv-if="data" style="padding:5px 10px;">
							<div class="row1">
								{data.name}
							</div>
							<div class="row2">
								<span>价格:{data.price}</span>
								<span>距离地铁:{data.loc}m</span>
								<span>通勤时间:{data.time}min</span>
							</div>
							<fox-icon icon="icon-bars">
								<a class="match_parent" href="detail.html"></a>
							</fox-icon>
						</div>
						
					</fox-template>
				</div>
			</fox-page-content>
		</fox-page>
		<script>
			(function() {
				var tmplDetail = $("#tmpl-detail").get(0);
				var datas = [{
					position : [116.404, 39.915],
					name : "龙腾苑三区",
					price : 4500,
					loc : 705,
					time : 30,
					thumnail : "https://raw.githubusercontent.com/zimengle/Static/master/Images/0.jpg"
				},{
					position : [116.404, 39.905],
					name : "龙腾苑二区",
					price : 3500,
					loc : 505,
					time : 20,
					thumnail : "https://raw.githubusercontent.com/zimengle/Static/master/Images/0.jpg"
				}];
				function addMarker(index,  obj) {
					var myLabel = new BMap.Label("", {
						position : new BMap.Point(obj.position[0], obj.position[1]),
						offset : new BMap.Size(-0, -0),
					});
					myLabel.setContent("<div class='map-maker'>" + index + "</div>");
					myLabel.setStyle({
						"background" : "none",
						"border" : "none"
					});
					map1.addOverlay(myLabel);
					myLabel.addEventListener("click", function() {
						tmplDetail.data = obj;
						map1.panTo(new BMap.Point(obj.position[0], obj.position[1]))
					});
					if(index == 0){
						$(myLabel).click();
					}
				}

				var map1 = new BMap.Map("map_container1");
				// 创建Map实例
				var point1 = new BMap.Point(116.404, 39.915);
				// 创建点坐标
				map1.centerAndZoom(point1, 15);
				// 初始化地图,设置中心点坐标和地图级别。
				map1.enableScrollWheelZoom();
				
				

				var marker1 = new BMap.Marker(new BMap.Point(116.384, 39.925));
				map1.addOverlay(marker1);
				
				datas.forEach(function(obj,index){
					addMarker(index+1, obj);
				});

				
			})();

		</script>

	</body>
</html>
