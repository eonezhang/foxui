<!DOCTYPE html>
<html>
	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>精品推荐</title>

		<script src="../../components/fox-core/dist/foxui.js"></script>
		<link rel="import" href="common_resource.html"/>
		
	</head>
	<body style="visibility: hidden;">
		<fox-page transition="hslide">
			<fox-toolbar class="primary">
				<fox-icon icon="icon-left-nav" class="left" onclick="history.back();"></fox-icon>
				<h1 id="pdetail-toolbar">正在加载中..</h1>
				
			</fox-toolbar>
			<fox-page-content class="pdetail">

				<fox-template id="pdetail-tmpl" style="visibility: visible">
					<div class="img" rv-background-image-resize="data.thumbnail"></div>
					<fox-tabs contentselector=".pp_tab" autoload style="margin-top:10px;">
						<span class="active">简介</span>
						<span>用时分布</span>
					</fox-tabs>
					<div class="main" id="pp_main">
						<fox-tabs-content active class="pp_tab">
							<div id="pp_detail" class="detail">
								<p>
									<label> 两居租金: </label>
									<span>{data.rent_price}(元)</span>
								</p>
								<p>
									<label> 平均房价: </label>
									<span>{data.price}元/平</span>
								</p>
								<p>
									<label> 建筑年代: </label>
									<span>{data.house_year|detailFormatter}</span>
								</p>
								<p>
									<label> 容积率: </label>
									<span>{data.volume_rate|detailFormatter}</span>
								</p>
								<p>
									<label> 建筑类型: </label>
									<span>{data.building_type|detailFormatter}</span>
								</p>
								<p>
									<label> 房屋类型: </label>
									<span>{data.house_type|detailFormatter}</span>
								</p>
								<p>
									<label> 物业费: </label>
									<span>{data.property_management_fee|detailFormatter}</span>
								</p>
								<p>
									<label> 物业公司: </label>
									<span>{data.property_company|detailFormatter}</span>
								</p>
								<p>
									<label> 开发商: </label>
									<span>{data.developers|detailFormatter}</span>
								</p>
							</div>
						</fox-tabs-content>
						<fox-tabs-content id="pp_tab2" class="pp_tab">
							<div class="charts_container">
								<div id="charts" ></div>
							</div>
							
						</fox-tabs-content>
					</div>

				</fox-template>

			</fox-page-content>
		</fox-page>
		<script>
			(function() {
				var $toolbar = $("#pdetail-toolbar");
				var tmpl = $("#pdetail-tmpl").get(0);
				var params = Utils.getURLParams();
				Utils.getDetailData(params['uid'], function(detailData) {
					var model = detailData.getDetailModel();
					tmpl.data = model;
					$toolbar.text(model.name);

					var $main = $("#pp_main").children();
					var isdraw = false;
					$("#pp_tab2").bind("aftershow",function(){
						
						if (!isdraw) {
							var c = new Charts.Line({
								guide : true,
								container : document.getElementById('charts'), //指定容器
								xAxis : {
									categories : ['10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '10', '11', '12','13','14']
								},
								series : [{
									name : 'Tokyo',
									color : 'rgb(183, 211, 240)',
									data : [10, 14, 19, 14, 19, 12, 10, 11, 18, 19, 17, 17, 17,13,13]
								}],
								onhover : {// 该属性可为空
									callback : function(x, yArr) {// touchmove时回调，必选
										console.info(arguments);
									}
								}
							});
							isdraw = true;
						}
					});
					

				});

			})();

		</script>
	</body>
</html>
